<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>iPhone 16 Pro Max 256GB</title>
    <link rel="stylesheet" href="css/iphonestyle.css" />
</head>

<body>
    <header>
        <div class="search-bar">
            <input type="text" placeholder="Пошук товарів..." />
        </div>
        <nav>
            <a href="index.html">Головна</a>
            <div class="dropdown">
                <a href="#">Каталог товарів</a>
                <div class="dropdown-content">
                    <a href="product.html">iPhone</a>
                    <a href="#">iPad</a>
                    <a href="#">MacBook</a>
                    <a href="#">Apple Watch</a>
                    <a href="#">Аксесуари</a>
                </div>
            </div>
            <a href="about.html">Про нас</a>
        </nav>
    </header>

    <div class="product-page">
        <div class="product-image">
            <img src="img/iphone16proMax.webp" alt="iPhone 16 Pro Max 256GB Desert Titanium" />
        </div>

        <div class="product-info">
            <div class="product">
                <h2 class="product-title">iPhone 16 Pro Max 256GB Desert Titanium</h2>
                <div class="stars">★★★★★</div>
                <div class="price-container">
                    <span class="current-price">55 999 ₴</span>
                    <span class="old-price">65 799 ₴</span>
                </div>
                <button class="buy-button">Купити</button>
            </div>


            <div class="form-overlay" id="formOverlay"></div>
            <!-- Форма покупки -->
            <div class="purchase-form" id="purchaseForm">
                <h2>Оформлення покупки</h2>
                <form id="purchaseFormContent">
                    <label for="name">ПІБ:</label>
                    <input type="text" id="name" name="name" placeholder="Ваше ПІБ" required />

                    <label for="phone">Номер телефону:</label>
                    <input type="tel" id="phone" name="phone" placeholder="Ваш номер телефону" required />

                    <label for="address">Адреса доставки:</label>
                    <input type="text" id="address" name="address" placeholder="Ваша адреса" required />

                    <label for="product">Назва товару:</label>
                    <input type="text" id="product" name="product" readonly />

                    <button type="submit">Підтвердити покупку</button>
                    <button type="button" class="close" id="closeFormButton">Закрити</button>
                </form>
            </div>

            <div class="color-container">
                <span>Колір</span>
                <div class="color-option">
                    <div class="color-circle" style="background-color: #e5c1a1"></div>
                    <span>Desert Titanium</span>
                </div>
            </div>

            <div class="capacity-container">
                <span>Ємність</span>
                <div class="capacity-options">
                    <div class="capacity-option active">256Гб</div>
                    <div class="capacity-option">512Гб</div>
                    <div class="capacity-option">1ТБ</div>
                </div>
            </div>

            <div class="advantages">
                <div class="advantage">
                    <div class="advantage-icon">
                        <img src="img/delivery.png" alt="Відправка сьогодні" />
                    </div>
                    <span>Відправка сьогодні</span>
                </div>
                <div class="advantage">
                    <div class="advantage-icon">
                        <img src="img/gwarntia.png" alt="Гарантія" />
                    </div>
                    <span>Гарантія до 36 місяців</span>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer-panel">
        <div>
            <h4>Каталог</h4>
            <a href="product.html"><span class="text_in_footer">iPhone</span></a>
            <a href="#"><span class="text_in_footer">iPad</span></a>
            <a href="#"><span class="text_in_footer">MacBook</span></a>
            <a href="#"><span class="text_in_footer">Apple Watch</span></a>
            <a href="#"><span class="text_in_footer">Аксесуари</span></a>
        </div>
        <div>
            <h4>Популярне</h4>
            <a href="product.html"><span class="text_in_footer">iPhone 16 Pro</span></a>
            <a href="product.html"><span class="text_in_footer">iPhone 15</span></a>
            <a href="#"><span class="text_in_footer">iPhone 15 Pro</span></a>
            <a href="#"><span class="text_in_footer">iPhone 15 Pro Max</span></a>
            <a href="#"><span class="text_in_footer">Apple Watch SE</span></a>
            <a href="#"><span class="text_in_footer">Apple Watch 9</span></a>
            <a href="#"><span class="text_in_footer">Apple Watch Ultra 2</span></a>
        </div>
        <div>
            <h4>Компанія</h4>
            <a href="about.html"><span class="text_in_footer">Про нас</span></a>
            <a href="#"><span class="text_in_footer">Оплата і доставка</span></a>
        </div>
        <div>
            <h4>Контакти</h4>
            <a href="tel:0991234567"><span class="text_in_footer">(099) 123-4567</span></a>
            <a href="mailto:support@gmail.com"><span class="text_in_footer">support@gmail.com</span></a>
            <p><span class="text_in_footer">Працюємо щодня з 10:00 до 20:00</span></p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const buyButtons = document.querySelectorAll('.buy-button');
            const purchaseForm = document.getElementById('purchaseForm');
            const formOverlay = document.getElementById('formOverlay');
            const closeFormButton = document.getElementById('closeFormButton');
            const productInput = document.getElementById('product');

            // Додаємо обробник для кожної кнопки "Купити"
            buyButtons.forEach(button => {
                button.addEventListener('click', function () {
                    // знайти заголовок у .product
                    const productContainer = this.closest('.product');
                    const productTitle = productContainer.querySelector('.product-title').innerText;

                    productInput.value = productTitle;
                    purchaseForm.style.display = 'block';
                    formOverlay.style.display = 'block';
                });
            });

            // Закрити по кнопці
            closeFormButton.addEventListener('click', function () {
                purchaseForm.style.display = 'none';
                formOverlay.style.display = 'none';
            });

            // Закрити по кліку на фон
            formOverlay.addEventListener('click', function () {
                purchaseForm.style.display = 'none';
                formOverlay.style.display = 'none';
            });

            document.getElementById("purchaseFormContent").addEventListener("submit", function (event) {
                event.preventDefault();

                let formData = new FormData(this);

                fetch("submit_order.php", {
                    method: "POST",
                    body: formData
                })
                    .then(response => response.text())
                    .then(data => {
                        if (data === "success") {
                            alert("Замовлення успішно оформлено!");
                            closePurchaseForm();
                        } else {
                            alert("Помилка при оформленні замовлення.");
                        }
                    })
                    .catch(error => console.error("Помилка:", error));
            });

        });
    </script>
</body>

</html>